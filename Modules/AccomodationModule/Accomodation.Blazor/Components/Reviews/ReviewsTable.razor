
@using ConectOne.Domain.Extensions
@using FilingModule.Domain.Enums
@using MudBlazor

<MudTable Elevation="25" ServerData="GetVactionExtensionReviewsAsync" Dense="@_dense" Bordered="@_bordered" Striped="@_striped" Hover="true" @ref="_table">

    <ToolBarContent>
        <div class="form-group" style="width:100%; padding-right:15px;">
            <input asp-for="Params.SearchText" class="form-control" placeholder="Type to Search" />
        </div>
        <div style="padding-right:15px;">
            <MudButton Variant="Variant.Filled" OnClick="Search" StartIcon="@Icons.Material.Filled.Search" Color="Color.Tertiary" IconColor="Color.Surface">Search</MudButton>
        </div>
        <MudSpacer />
        <div style="padding-right:15px;">
            <MudButton Variant="Variant.Filled" OnClick="ClearFiltersAsync" StartIcon="@Icons.Material.Filled.Refresh" Color="Color.Secondary" IconColor="Color.Surface">Reload</MudButton>
        </div>
        <MudSpacer />
        <div style="padding-right:15px;">
            <MudButton Variant="Variant.Filled" Href="/packages/reviews/create" StartIcon="@Icons.Material.Filled.Add" Color="Color.Primary " IconColor="Color.Surface">Create</MudButton>
        </div>
    </ToolBarContent>

    <HeaderContent>
        @if (!_dense)
        {
            <MudTh><strong>Profile</strong></MudTh>
            <MudTh><strong>Company Logo</strong></MudTh>
        }
        <MudTh><strong>Name</strong></MudTh>
        <MudTh><strong>Short Description</strong></MudTh>
        <MudTh></MudTh>
    </HeaderContent>

    <RowTemplate>

        @if (!_dense)
        {
            <MudTd><MudImage Width="50" Height="50" Src="@(context.Images.FirstOrDefault(c => c.ImageType == UploadType.Profile).RelativePath.Contains("StaticFiles") ? $"{Configuration["ApiConfiguration:BaseApiAddress"]}\\{context.Images.FirstOrDefault(c => c.ImageType == UploadType.Profile).RelativePath.Replace("\\", "/")}" : context.Images.FirstOrDefault(c => c.ImageType == UploadType.Profile).RelativePath)" /> </MudTd>
        }
        <MudTd>@context.Name</MudTd>
        <MudTd><strong>@context.ReviewText.HtmlToPlainText().TruncateLongString(150)</strong></MudTd>
        <MudTd DataLabel="Actions" Style="text-align: right">
            <MudMenu Label="Actions" Variant="Variant.Filled" DisableElevation="true" EndIcon="@Icons.Material.Filled.KeyboardArrowDown" IconColor="Color.Secondary" AnchorOrigin="Origin.TopLeft">
                <MudMenuItem Icon="@Icons.Material.Filled.Edit" Href="@($"/reviews/update/{@context.Id}")">Edit</MudMenuItem>
                <MudMenuItem Icon="@Icons.Material.Filled.Delete" @onclick="@(() => Delete(context.Id))">Delete</MudMenuItem>
            </MudMenu>
        </MudTd>

    </RowTemplate>

    <FooterContent>
        <MudTd colspan="6">
            <div class="d-flex">
                <MudSwitch T="bool" @bind-Checked="@_dense" Color="Color.Secondary" Style="margin-left: 5px;">Dense</MudSwitch>
                <MudSwitch T="bool" @bind-Checked="@_striped" Color="Color.Tertiary" Style="margin-left: 5px;">Striped</MudSwitch>
                <MudSwitch T="bool" @bind-Value="@_striped" Color="Color.Tertiary" Style="margin-left: 5px;">Striped</MudSwitch>
            </div>
        </MudTd>
    </FooterContent>

    <PagerContent>
        <MudTablePager />
    </PagerContent>

</MudTable>
