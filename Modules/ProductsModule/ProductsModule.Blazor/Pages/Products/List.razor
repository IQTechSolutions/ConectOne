@page "/products"
@using ConectOne.Blazor.Components
@using Microsoft.AspNetCore.Authorization
@using MudBlazor
@using ProductsModule.Blazor.Components.Products

@attribute [Authorize]

<style>
    .mud-table-container {
        overflow: auto;
    }
</style>

<MudGrid>
    <MudItem md="6">
        @if (_shopOwners.Any())
        {
            <DefaultTitle Title="Shops" Caption="Shops available for management"/>
        }
        else
        {
            <DefaultTitle Title="Products" Caption="All available products"/>
        }

        
    </MudItem>
    <MudItem md="6" Style="float:right">
        <MudBreadcrumbs Items="_items" Style="float:right"></MudBreadcrumbs>
    </MudItem>
    <MudItem md="12">
        @if (_shopOwners.Any())
        {
            <MudTabs>
                <MudTabPanel Text="School Shop">
                    <ProductsTable/>
                </MudTabPanel>
                @foreach (var item in _shopOwners)
                {
                    <MudTabPanel Text="@item.Name" >
                        <ProductsTable ShopOwnerId="@item.Id"/>
                    </MudTabPanel>
                }
            </MudTabs>
        }
        else
        {
            <ProductsTable/>
        }
        
    </MudItem>
</MudGrid>
