@page "/areas"

@using ConectOne.Blazor.Components
@using ConectOne.Domain.Extensions
@using MudBlazor

<div id="hotel-main-content" class="card card-body bg-light mt-5">
    <DefaultTitle Title="Areas" Caption="This is a list of all the current areas offered" />
    <MudTable Elevation="25" ServerData="GetAreasAsync" Dense="@_dense" Bordered="@_bordered" Striped="@_striped" Hover="true" @ref="_table">

        <ToolBarContent>

            <div style="padding-right:15px;">
                <MudButton Variant="Variant.Filled" OnClick="Reload" StartIcon="@Icons.Material.Filled.Refresh" Color="Color.Secondary" IconColor="Color.Surface">Reload</MudButton>
            </div>

            @if (_canCreateArea)
            {
                <MudSpacer />
                <div style="padding-right:15px;">
                    <MudButton OnClick="Create" StartIcon="@Icons.Material.Filled.Add" Color="Color.Primary" IconColor="Color.Surface">Create</MudButton>
                </div>
            }

        </ToolBarContent>

        <HeaderContent>
            <MudTh><strong>Name</strong></MudTh>
            <MudTh><strong>Short Description</strong></MudTh>
            <MudTh>
                <div style="float:right">
                    <MudMenu Icon="@Icons.Material.Filled.Settings" Color="Color.Primary" AnchorOrigin="Origin.BottomCenter" TransformOrigin="Origin.BottomLeft">
                        <MudMenuItem><MudSwitch @bind-Value="@_dense" Color="Color.Secondary" Style="margin-left: 5px;">Dense</MudSwitch></MudMenuItem>
                        <MudMenuItem><MudSwitch @bind-Value="@_striped" Color="Color.Tertiary" Style="margin-left: 5px;">Striped</MudSwitch></MudMenuItem>
                        <MudMenuItem><MudSwitch @bind-Value="@_bordered" Color="Color.Warning" Style="margin-left: 5px;">Bordered</MudSwitch></MudMenuItem>
                    </MudMenu>
                </div>
            </MudTh>
        </HeaderContent>

        <RowTemplate>

            <MudTd>@context.Name</MudTd>
            <MudTd><strong>@context.Description.TruncateLongString(150)</strong></MudTd>

            @if (_canEditArea && _canDeleteArea)
            {
                <MudTd DataLabel="Actions" Style="text-align: right">
                    <MudMenu Label="Actions" Variant="Variant.Filled" DisableElevation="true" EndIcon="@Icons.Material.Filled.KeyboardArrowDown" IconColor="Color.Secondary" AnchorOrigin="Origin.TopLeft">
                        @if (_canEditArea)
                        {
                            <MudMenuItem Icon="@Icons.Material.Filled.Edit" OnClick="@(() => Update(context))">Edit</MudMenuItem>
                        }
                        @if (_canDeleteArea)
                        {
                            <MudMenuItem Icon="@Icons.Material.Filled.Delete" @onclick="@(() => Delete(context.Id))">Delete</MudMenuItem>
                        }
                        @if (_canViewRestaurants)
                        {
                            <MudMenuItem Icon="@Icons.Material.Filled.Add" Href="@($"restaurants/all/{context.Id}")">Restaurants</MudMenuItem>
                        }
                    </MudMenu>
                </MudTd>
            }

        </RowTemplate>

    </MudTable>
</div>