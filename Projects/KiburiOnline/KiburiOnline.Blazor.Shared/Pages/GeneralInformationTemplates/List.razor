@page "/general-information-templates"

@using ConectOne.Blazor.Components
@using ConectOne.Domain.Extensions
@using KiburiOnline.Blazor.Shared.Layouts
@using MudBlazor

@layout WebsiteLayout

<HeadContent>
    <!-- Robots -->
    <meta name="robots" content="noindex, nofollow" />
</HeadContent>

<div id="hotel-main-content" class="card card-body bg-light mt-5">
    <DefaultTitle Title="Information Templates" Caption="All general information templates" />

    <MudTable Elevation="25" Loading="!_loaded" Items="_templates" Hover="true" @ref="_table">
        <HeaderContent>
            <MudTh>Name</MudTh>
            <MudTh>Information</MudTh>
            <MudTh Style="float:right;"><MudButton Variant="Variant.Filled" Color="Color.Primary" OnClick="AddTemplate" StartIcon="@Icons.Material.Filled.Add" IconColor="Color.Surface">Create</MudButton></MudTh>
        </HeaderContent>
        <RowTemplate>
            <MudTd DataLabel="Name">
                <MudHighlighter Text="@context.Name" />
            </MudTd>
            <MudTd DataLabel="Information">
                @context.Information.HtmlToPlainText().TruncateLongString(150)
            </MudTd>
            <MudTd DataLabel="Actions" Style="text-align: right">
                <MudMenu Label="Actions" Variant="Variant.Filled" EndIcon="@Icons.Material.Filled.KeyboardArrowDown" IconColor="Color.Secondary" AnchorOrigin="Origin.BottomLeft">
                    <MudMenuItem Icon="@Icons.Material.Filled.Edit" @onclick="@(() => UpdateTemplate(context))">Edit</MudMenuItem>
                    <MudMenuItem Icon="@Icons.Material.Filled.Delete" @onclick="@(() => DeleteTemplate(context.Id))">Delete</MudMenuItem>
                </MudMenu>
            </MudTd>
        </RowTemplate>
    </MudTable>
</div>
