@page "/meal-addition-templates"
@using AccomodationModule.Domain.Enums
@using ConectOne.Blazor.Components
@using ConectOne.Domain.Extensions
@using KiburiOnline.Blazor.Shared.Layouts
@using MudBlazor

@layout WebsiteLayout

<HeadContent>
    <!-- Robots -->
    <meta name="robots" content="noindex, nofollow" />
</HeadContent>

<div id="hotel-main-content" class="card card-body bg-light mt-5">
    <DefaultTitle Title="Meal Addition Templates" Caption="All available meal addition templates" />

    @if (!_loaded)
    {
        <MudProgressCircular Color="Color.Primary" Indeterminate="true" />
    }
    else
    {
        <MudTable Elevation="25" Items="_templates" Hover="true" @ref="_table">
            <ToolBarContent>
                <MudSpacer/>
                <MudButton Color="Color.Primary" OnClick="AddTemplate" StartIcon="@Icons.Material.Filled.Add" IconColor="Color.Surface">Create</MudButton>
            </ToolBarContent>
            <HeaderContent>
                <MudTh><strong>Restaurant</strong></MudTh>
                <MudTh><strong>Meal Type</strong></MudTh>
                <MudTh><strong>Guest Type</strong></MudTh>
                <MudTh><strong>Comments</strong></MudTh>
                <MudTh></MudTh>
            </HeaderContent>
            <RowTemplate>
                <MudTd DataLabel="Restaurant">
                    <MudHighlighter Text="@context.Restaurant.Name" />
                </MudTd>
                <MudTd DataLabel="Meal Type">
                    @((MealType)context.MealType)
                </MudTd>
                <MudTd DataLabel="Guest Type">
                    @((GuestType)context.GuestType)
                </MudTd>
                <MudTd DataLabel="Guest Type">
                    @context.Notes.TruncateLongString(55)
                </MudTd>
                <MudTd DataLabel="Actions" Style="text-align: right">
                    <MudMenu Label="Actions" Variant="Variant.Filled" EndIcon="@Icons.Material.Filled.KeyboardArrowDown" IconColor="Color.Secondary" AnchorOrigin="Origin.BottomLeft">
                        <MudMenuItem Icon="@Icons.Material.Filled.Edit" @onclick="@(() => UpdateTemplate(context))">Edit</MudMenuItem>
                        <MudMenuItem Icon="@Icons.Material.Filled.Delete" @onclick="@(() => DeleteTemplate(context.Id))">Delete</MudMenuItem>
                    </MudMenu>
                </MudTd>
            </RowTemplate>
        </MudTable>
    }
</div>
