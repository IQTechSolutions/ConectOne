@page "/chatgroups"

@attribute [Authorize]
@using ConectOne.Blazor.Components
@using ConectOne.Domain.Extensions
@using Microsoft.AspNetCore.Authorization
@using MudBlazor


<style>
    .second-card {
        background-color: white;
    }
</style>

@if (!_loaded)
{
    <Spinner></Spinner>
}
else
{
    <MobilePageTitle Title="Chat Groups"></MobilePageTitle>

    <MudTabs>
        <MudTabPanel Text="Chat Groups">
            <MudGrid Class="mb-5 mt-3" Spacing="2">
                @foreach (var group in _chatGroups)
                {
                    <MudItem xs="12" sm="12" md="12">
                        <MudCard Elevation="1" Class="d-flex flex-row rounded-lg second-card" @onclick="@(() => OpenMessageList(group.Id, group.Name))">
                            <div style="height:50px; width: 50px; padding:5px;">
                                <MudAvatar Class="me-2" Color="Color.Info" Size="Size.Small" Style="width:100%; height:100%;">
                                    @group.Name.GetInitials()
                                </MudAvatar>
                            </div>

                            <MudText Typo="Typo.subtitle1" Style="font-weight: 500; color:black !important;" Class="align-self-center"> @group.Name </MudText>
                        </MudCard>
                    </MudItem>
                }
            </MudGrid>
        </MudTabPanel>
        <MudTabPanel Text="Contacts">
            <MudGrid Class="mb-5 mt-3" Spacing="2">
                @foreach (var group in _contacts)
                {
                    <MudItem xs="12" sm="12" md="12">
                        <MudCard Elevation="1" Class="d-flex flex-row rounded-lg second-card" @onclick="@(() => OpenMessageList(group.UserId, group.DisplayName))">
                            <div style="height:50px; width: 50px; padding:5px;">
                                <MudAvatar Class="me-2" Color="Color.Info" Size="Size.Small" Style="width:100%; height:100%;">
                                    @group.DisplayName.GetInitials()
                                </MudAvatar>
                            </div>

                            <MudText Typo="Typo.subtitle1" Style="font-weight: 500; color:black !important;" Class="align-self-center"> @group.DisplayName </MudText>
                        </MudCard>
                    </MudItem>
                }
            </MudGrid>
        </MudTabPanel>
    </MudTabs>

    
}